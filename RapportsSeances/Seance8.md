<h1>Rapport de la séance 8 du 1er mars 2023 et des vacances</h1>
<ul> 
  <li><p>J'ai fini de stabiliser le support avec une colle très rapide à bois, avec du scotch double face j'ai stabilisé la lyre et la carte Arduino. </p></li>
  <img src="/Documents/Images/IMG_1873.jpg" alt="support fixé" style="width:300px;height:400px;"/>
  <li><p>J'ai installé les logiciels dont j'avais besoin pour utiliser le protocole MIDI : un logiciel de création musicale (GarageBand), un logiciel servant de pont pour relier le port série et le port MIDI virtuel. Sur MAC OS,  il y a déjà une configuration de port MIDI virtuel incluse : IAC Driver. Un gros problème vient : Hairless MIDI ne peut pas s'ouvrir car pas compatible avec ma version de Mac. J'ai donc testé de multiples méthodes pour que j'arrive à connecter tous les logiciels avec ma carte Arduino sans Hairless MIDI : installer une machine virtuelle (échec), essayer sans Hairless MIDI en configurant d'autres paramètres de mon MAC (échec), télécharger la bibliothèque Apple-MIDI et USB-MIDI(échec). <br> Au final, on m'a prêté un PC Windows. Pour Windows j'ai téléchargé Ableton LIVE (logiciel de création musicale), Hairless MIDI, LoopMIDI (qui permet de créer des ports MIDI virtuels). J'ai réussi à installer les logiciels sans problème.<p></li>
  <li><p>Avant de tester les logiciels, il fallait évidemment avoir un programme adéquat et compatible avec le protocole MIDI. Je me suis renseignée sur la façon dont marchait la bibliothèque MIDI sur Arduino (quelles méthodes utiliser, quoi faire pour que le programme permette à la carte Arduino de traduire les signaux reçus etc.). Lorsqu'un signal MIDI est envoyé à la carte Arduino, il envoie trois bytes d'informations : le byte de statut qui dit si la note est jouée (signal dit "Note On"), relachée (signal dit "Note Off"), indique le canal MIDI; un byte qui indique quelle note est jouée (les notes MIDI sont sous la forme de nombre, par exemple 67 représente un sol (la note la plus grave que ma lyre peut jouer)et 93 représente un la (la note la plus aigue de ma lyre)); et un byte sur la vélocité de la note.  <br> Ainsi, le but de mon programme est simple : dès qu'un signal MIDI de "Note on" est reçu, il doit détecter à quel servomoteur est associé cette note et l'activer. </p><li> 
  <li><p>Pour pouvoir envoyer des signaux MIDI à la carte Arduino, j'ai du connecter tous les logiciels entre eux. Pour ce faire, dans LoopMidi j'ai créé un port virtuel (ici appelé loopMidi port"), dans HairlessMidi j'ai donc selectionné comme entrée le port "loopMidi port", j'ai branché la carte arduino au port de série, et dans hairless MIDI j'ai relié le port midi virtuel au port de série (ici "COM4"). Avant de tester avec une piste MIDI sur Ableton Live, j'ai téléchargé VMPK (un clavier MIDI virtuel) afin de voir si la carte Arduino recevait bien les signaux MIDI et que mon programme marchait. Dans VMPK j'ai donc configuré la sortie MIDI au port virtuel "loopMidi port". Après plusieurs essais et problèmes de connexion de port, ça a marché : lorsque j'appuyais sur une touche du clavier du piano virtuel, la note associée se jouait automatiquement sur la lyre.</p></li>
  <img src="/Documents/Images/IMG_1869.jpg" alt="logiciels" style="width:300px;height:400px;"/>
  <li><p>Au début, un message revenait souvent sur Hairless MIDI me disant que les FTDI Drivers ne semblaient pas être installés sur l'ordinateur, cela empechait tout signal MIDI d'être envoyé à la carte Arduino. Pourtant, les FTDI Drivers étaient bien installés. Au final, il s'est avéré que c'était un bug du logiciel. Ainsi, pour remédier à ce bug, j'ai découvert qu'il suffisait de sélectionner une nouvelle fois le port série de la carte Arduino dans Hairless MIDI après éxécution du programme.</p></li>
  <li><p>J'ai également inséré quelques pistes MIDI sur Ableton Live afin de voir si le programme marchait également avec ce logiciel. Il marchait. En revanche, ma lyre ayant seulement 16 cordes et des notes de sol à la (de 2 gammes au dessus), les pistes MIDI qui peuvent se jouer entièrement sont rares. En effet, la lyre jouaient quelques notes des pistes MIDI mais pas toutes.</p></li>
   <img src="/Documents/Images/IMG_1871.jpg" alt="Ableton live" style="width:300px;height:400px;"/>
  <li><p>J'ai retesté toutes les positions des médiators et recollé certains, j'ai revissé des servomoteurs afin qu'ils soient plus stables, puisque d'un jour à l'autre les positions des servomoteurs semblent différentes puisque certains ne jouent plus bien leur corde</p></li>
  <li><p>J'ai changé une corde de la lyre et je l'ai accordée.</p></li>
  <li><p>J'ai cherché des musiques MIDI à importer sur Ableton Live qui peuvent jouer mes 16 cordes sur des sites tels que bitmidi.com ou freemidi.org.</p></li>
    

